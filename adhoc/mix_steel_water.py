"""Example how to mix compositions by volume fractions."""

from __future__ import annotations

from mckit.material import mixture_by_volume
from mckit.parser.material_parser import parse


def main() -> None:
    """Compose steel and water."""

    water = """
    C ***********************************
    C *  WATER
    C *  MASS DENSITY [G/CC] - 0.946
    C *  VOLUME FRACTION [%] - 100
    C ***********************************
    C
    C
    M400     1001.31c   6.33910e-002 $H   1 AMOUNT(%)  2.0000 AB(%) 99.99
             1002.31c   7.29080e-006 $H   2 AMOUNT(%)  2.0000 AB(%)  0.01
             8016.31c   3.15453e-002 $O  16 weight(%)     N/A ab(%) 99.76
             8017.31c   1.20164e-005 $O  17 weight(%)     N/A ab(%)  0.04
             8018.31c   6.48253e-005 $O  18 weight(%)     N/A ab(%)  0.20
    C *
    C *  T.A.D. = 9.50204E-002
    C *  EFF.DENSITY = 9.46000E-001
    C
    """

    steel = """
    C ***********************************
    C *  SS316L(N)-IG
    C *  MASS DENSITY [G/CC] - 7.93
    C *  VOLUME FRACTION [%] - 100
    C ***********************************
    C
    C
    M100     6012.31c   1.16743e-004 $C 12 weight(%)     N/A ab(%) 98.93
             6013.31c   1.26266e-006 $C 13 weight(%)     N/A ab(%)  1.07
            25055.31c   1.56467e-003 $MN 55 WEIGHT(%)  1.8000
            28058.31c   6.78530e-003 $NI 58 WEIGHT(%) 12.2500 AB(%) 68.08
            28060.31c   2.61369e-003 $NI 60 WEIGHT(%) 12.2500 AB(%) 26.22
            28061.31c   1.13615e-004 $NI 61 WEIGHT(%) 12.2500 AB(%)  1.14
            28062.31c   3.62255e-004 $NI 62 WEIGHT(%) 12.2500 AB(%)  3.63
            28064.31c   9.22556e-005 $NI 64 WEIGHT(%) 12.2500 AB(%)  0.93
            24050.31c   6.98362e-004 $CR 50 WEIGHT(%) 17.5000 AB(%)  4.34
            24052.31c   1.34673e-002 $CR 52 WEIGHT(%) 17.5000 AB(%) 83.79
            24053.31c   1.52707e-003 $CR 53 WEIGHT(%) 17.5000 AB(%)  9.50
            24054.31c   3.80118e-004 $CR 54 WEIGHT(%) 17.5000 AB(%)  2.37
            42092.31c   1.84688e-004 $MO 92 WEIGHT(%)  2.5000 AB(%) 14.84
            42094.31c   1.15119e-004 $MO 94 WEIGHT(%)  2.5000 AB(%)  9.25
            42095.31c   1.98129e-004 $MO 95 WEIGHT(%)  2.5000 AB(%) 15.92
            42096.31c   2.07587e-004 $MO 96 WEIGHT(%)  2.5000 AB(%) 16.68
            42097.31c   1.18852e-004 $MO 97 WEIGHT(%)  2.5000 AB(%)  9.55
            42098.31c   3.00304e-004 $MO 98 WEIGHT(%)  2.5000 AB(%) 24.13
            42100.31c   1.19848e-004 $MO100 WEIGHT(%)  2.5000 AB(%)  9.63
             7014.31c   2.37784e-004 $N 14 WEIGHT(%)  0.0700 AB(%) 99.63
             7015.31c   8.87228e-007 $N 15 WEIGHT(%)  0.0700 AB(%)  0.37
            15031.31c   3.85448e-005 $P 31 WEIGHT(%)  0.0250
            16032.31c   1.41475e-005 $S  32 weight(%)     N/A ab(%) 94.99
            16033.31c   1.11703e-007 $S  33 weight(%)     N/A ab(%)  0.75
            16034.31c   6.32982e-007 $S  34 weight(%)     N/A ab(%)  4.25
            16036.31c   1.48937e-009 $S  36 weight(%)     N/A ab(%)  0.01
            14028.31c   7.84113e-004 $SI 28 WEIGHT(%)  0.5000 AB(%) 92.23
            14029.31c   3.98149e-005 $SI 29 WEIGHT(%)  0.5000 AB(%)  4.68
            14030.31c   2.62461e-005 $SI 30 WEIGHT(%)  0.5000 AB(%)  3.09
            29063.31c   1.55947e-004 $CU 63 WEIGHT(%)  0.3000 AB(%) 69.17
            29065.31c   6.95078e-005 $CU 65 WEIGHT(%)  0.3000 AB(%) 30.83
            73181.31c   2.63918e-006 $TA181 WEIGHT(%)  0.0100
            22046.31c   8.23083e-006 $TI 46 WEIGHT(%)  0.1000 AB(%)  8.25
            22047.31c   7.42272e-006 $TI 47 WEIGHT(%)  0.1000 AB(%)  7.44
            22048.31c   7.35180e-005 $TI 48 WEIGHT(%)  0.1000 AB(%) 73.72
            22049.31c   5.39743e-006 $TI 49 WEIGHT(%)  0.1000 AB(%)  5.41
            22050.31c   5.16797e-006 $TI 50 WEIGHT(%)  0.1000 AB(%)  5.18
             5010.31c   8.79045e-007 $ B 10 WEIGHT(%)  0.0010 AB(%) 19.90
             5011.31c   3.53827e-006 $ B 11 WEIGHT(%)  0.0010 AB(%) 80.10
            41093.31c   5.14019e-006 $NB 93 WEIGHT(%)  0.0100
            27059.31c   4.05167e-005 $CO 59 WEIGHT(%)  0.0500
            26054.31c   3.24112e-003 $FE 54 WEIGHT(%) 64.8443 AB(%)  5.84
            26056.31c   5.08787e-002 $FE 56 WEIGHT(%) 64.8443 AB(%) 91.75
            26057.31c   1.17501e-003 $FE 57 WEIGHT(%) 64.8443 AB(%)  2.12
            26058.31c   1.56371e-004 $FE 58 WEIGHT(%) 64.8443 AB(%)  0.28
    C *
    C *  T.A.D. = 8.59386E-002
    C *  EFF.DENSITY = 7.93000E+000
    C
    """

    water_composition = parse(water)
    steel_composition = parse(steel)

    water_density = 0.946
    steel_density = 7.93

    water_volume_fraction = 0.5
    steel_volume_fraction = 0.5

    d, m = mixture_by_volume(
        (water_composition, water_density, water_volume_fraction),
        (steel_composition, steel_density, steel_volume_fraction),
        number=1001,
    )
    with open("steel-water.txt", "w") as fid:
        print("c ==============================", file=fid)
        print("c steel 50vol% + water 50vol%", file=fid)
        print("c density = ", d, file=fid)
        print(m.mcnp_repr(), file=fid)


if __name__ == "__main__":
    main()

# density 4.438
# MNone 1001.31c  3.502643e-01
#         1002.31c  4.028501e-05
#         8016.31c  1.743022e-01
#         8017.31c  6.639611e-05
#         8018.31c  3.581895e-04
#         6012.31c  6.452198e-04
#         6013.31c  6.978519e-06
#         25055.31c  8.647679e-03
#         28058.31c  3.750126e-02
#         28060.31c  1.444544e-02
#         28061.31c  6.279318e-04
#         28062.31c  2.002125e-03
#         28064.31c  5.098819e-04
#         24050.31c  3.859734e-03
#         24052.31c  7.443160e-02
#         24053.31c  8.439870e-03
#         24054.31c  2.100851e-03
#         42092.31c  1.020741e-03
#         42094.31c  6.362442e-04
#         42095.31c  1.095027e-03
#         42096.31c  1.147300e-03
#         42097.31c  6.568759e-04
#         42098.31c  1.659732e-03
#         42100.31c  6.623806e-04
#         7014.31c  1.314194e-03
#         7015.31c  4.903566e-06
#         15031.31c  2.130309e-04
#         16032.31c  7.819096e-05
#         16033.31c  6.173645e-07
#         16034.31c  3.498390e-06
#         16036.31c  8.231508e-09
#         14028.31c  4.333666e-03
#         14029.31c  2.200505e-04
#         14030.31c  1.450580e-04
#         29063.31c  8.618940e-04
#         29065.31c  3.841584e-04
#         73181.31c  1.458632e-05
#         22046.31c  4.549047e-05
#         22047.31c  4.102418e-05
#         22048.31c  4.063222e-04
#         22049.31c  2.983073e-05
#         22050.31c  2.856254e-05
#         5010.31c  4.858340e-06
#         5011.31c  1.955545e-05
#         41093.31c  2.840900e-05
#         27059.31c  2.239293e-04
#         26054.31c  1.791315e-02
#         26056.31c  2.811984e-01
#         26057.31c  6.494091e-03
#         26058.31c  8.642374e-04
